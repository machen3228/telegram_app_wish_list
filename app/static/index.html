<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gift Wishlist</title>
    <link rel="stylesheet" href="/style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app">
        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
        <div id="loading" class="container">
            <div class="status loading">
                –ó–∞–≥—Ä—É–∑–∫–∞...
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
        <div id="main-app" style="display: none;">
            <!-- –¢–∞–±—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
            <div class="tabs">
                <button class="tab active" data-tab="profile">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
                <button class="tab" data-tab="friends">üë• –î—Ä—É–∑—å—è</button>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ -->
            <div class="container">
                <!-- –í–∫–ª–∞–¥–∫–∞: –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å -->
                <div id="tab-profile" class="tab-content active">
                    <div class="profile-header">
                        <img id="my-avatar" class="profile-avatar" src="" alt="Avatar">
                        <div class="profile-info">
                            <div id="my-name" class="profile-name"></div>
                            <div id="my-username" class="profile-username"></div>
                            <div id="my-id" class="profile-id"></div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">
                            <h2 class="section-title">üéÅ –ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏</h2>
                            <button class="btn btn-primary btn-small" onclick="openAddGiftModal()">
                                + –î–æ–±–∞–≤–∏—Ç—å
                            </button>
                        </div>
                        <div id="my-gifts-container"></div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –î—Ä—É–∑—å—è -->
                <div id="tab-friends" class="tab-content">
                    <!-- –ù–û–í–ê–Ø –°–ï–ö–¶–ò–Ø: –ó–∞—è–≤–∫–∏ –≤ –¥—Ä—É–∑—å—è -->
                    <div class="section">
                        <div class="section-header">
                            <h2 class="section-title">üì¨ –ó–∞—è–≤–∫–∏ –≤ –¥—Ä—É–∑—å—è</h2>
                        </div>
                        <div id="friend-requests-container"></div>
                    </div>

                    <!-- –°–µ–∫—Ü–∏—è: –ú–æ–∏ –¥—Ä—É–∑—å—è -->
                    <div class="section">
                        <div class="section-header">
                            <h2 class="section-title">üë• –ú–æ–∏ –¥—Ä—É–∑—å—è</h2>
                            <button class="btn btn-primary btn-small" onclick="openAddFriendModal()">
                                + –î–æ–±–∞–≤–∏—Ç—å
                            </button>
                        </div>
                        <div id="friends-container"></div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞: –ü—Ä–æ—Ñ–∏–ª—å –¥—Ä—É–≥–∞ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è) -->
                <div id="tab-friend-profile" class="tab-content">
                    <button class="btn btn-small" onclick="showTab('friends')" style="margin-bottom: 16px;">
                        ‚Üê –ù–∞–∑–∞–¥ –∫ –¥—Ä—É–∑—å—è–º
                    </button>

                    <div class="profile-header">
                        <img id="friend-avatar" class="profile-avatar" src="" alt="Avatar">
                        <div class="profile-info">
                            <div id="friend-name" class="profile-name"></div>
                            <div id="friend-username" class="profile-username"></div>
                            <div id="friend-id" class="profile-id"></div>
                        </div>
                    </div>

                    <div class="section">
                        <h2 class="section-title">üéÅ –í–∏—à–ª–∏—Å—Ç</h2>
                        <div id="friend-gifts-container"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫ -->
        <div id="modal-add-gift" class="modal">
            <div class="modal-content">
                <div class="modal-header">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫</div>
                <form id="form-add-gift" onsubmit="handleAddGift(event)">
                    <div class="form-group">
                        <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                        <input type="text" name="name" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–°—Å—ã–ª–∫–∞</label>
                        <input type="url" name="url" class="form-input">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–ñ–µ–ª–∞–µ–º–æ—Å—Ç—å (1-10)</label>
                        <input type="number" name="wish_rate" class="form-input" min="1" max="10">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–¶–µ–Ω–∞ (‚ÇΩ)</label>
                        <input type="number" name="price" class="form-input" min="0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–ó–∞–º–µ—Ç–∫–∞</label>
                        <textarea name="note" class="form-input"></textarea>
                    </div>
                    <div class="modal-buttons">
                        <button type="button" class="btn" onclick="closeModal('modal-add-gift')">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="btn btn-primary">
                            –î–æ–±–∞–≤–∏—Ç—å
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞ -->
        <div id="modal-add-friend" class="modal">
            <div class="modal-content">
                <div class="modal-header">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –≤ –¥—Ä—É–∑—å—è</div>
                <form id="form-add-friend" onsubmit="handleAddFriend(event)">
                    <div class="form-group">
                        <label class="form-label">Telegram ID –¥—Ä—É–≥–∞ *</label>
                        <input type="number" name="friend_id" class="form-input" required
                               placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 123456789">
                        <small style="color: var(--tg-theme-hint-color); font-size: 12px; display: block; margin-top: 4px;">
                            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏—Ç –∑–∞—è–≤–∫—É –∏ —Å–º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –µ—ë
                        </small>
                    </div>
                    <div class="modal-buttons">
                        <button type="button" class="btn" onclick="closeModal('modal-add-friend')">
                            –û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="btn btn-primary">
                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º JavaScript -->
    <script src="/app.js"></script>
</body>
</html>
